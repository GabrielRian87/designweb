<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>

    <style>
        .form{
            margin-bottom: 5px;
        }

        input{
            margin-bottom: 5px;
        }
    </style>
</head>
<body>

<div x-data="app">
<p>Orçamento Rápido</p>
<div class="form">
    <input 
    type="text" 
    placeholder="Nome do serviço" 
    x-model="novoServico.nome"
    @keyup.enter="adicionar()">

    <input 
    type="number" 
    placeholder="Valor (R$)" 
    step="0.01" 
    x-model.number="novoServico.valor"
    @keyup.enter="adicionar()">
    
    <button @click="adicionar()">Adicionar</button>
</div>

<div class="lista" x-show="servicos.length > 0">
    <template x-for="(servico, index) in servicos" :key="index">
    <div class="item">
        <span x-text="servico.nome"></span>
        <span>R$ <span x-text="servico.valor.toFixed(2).replace('.', ',')"></span></span>
    </div>
    </template>
</div>

<div class="total">
    Total: R$ <span x-text="total.toFixed(2).replace('.', ',')"></span>
</div>
</div>

<script>
document.addEventListener('alpine:init', ()=>{
    Alpine.data('app', ()=>({
    servicos: [],
    novoServico: {
        nome: '',
        valor: ''
    },

    adicionar(){
        if (!this.novoServico.nome.trim() || !this.novoServico.valor) {
        alert('Preencha o nome e o valor do serviço!');
        return;
        }

        this.servicos.push({
        nome: this.novoServico.nome.trim(),
        valor: Number(this.novoServico.valor)
        });
        this.novoServico.nome= '';
        this.novoServico.valor= '';
    },

    get total(){
        return this.servicos.reduce((soma, item)=> soma + item.valor, 0);
    }
    }));
});
</script>

</body>
</html>